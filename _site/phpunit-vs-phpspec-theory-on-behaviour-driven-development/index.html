
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PHPUnit vs PHPSpec: theory on Behaviour Driven Development 1/3 </title>
    
    <meta name="description" content="PHPUnit vs PHPSpec: theory on Behaviour Driven Development 1/3">
    
    <meta name="author" content="Giulio De Donato">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="/assets/themes/readable-liuggio/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/readable-liuggio/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/assets/themes/readable-liuggio/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <!-- Google Web Font-->
    <link href='http://fonts.googleapis.com/css?family=Lato:400,400italic,900italic,300' rel='stylesheet' type='text/css'>

</head>

<body>
<div class="container">
    <header>
        <div id="header">
            <div class="logo span6"><img src="/assets/themes/readable-liuggio/img/welcometothebundle-logo.png"></div>
            <h2><a title="Blog of Giulio De Donato" id="sitename" href="http://www.welcometothebundle.com/">Welcome to the bundle</a></h2>
            <p>Best Practice, symfony2, developing, and fluffs.</p>
        </div>
    </header>


<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
    <section id="content">
        <div class="row">
            <aside class="span3">
                <div class="well">
                    <p align="center"><img
                            src="http://www.gravatar.com/avatar/662a52953053d94a145a00df9da9f0d2.png?size=48">
                    </p>
                    <p style="font-size:95%">I'm liuggio (aka <a href="https://plus.google.com/115690008178168800202?rel=author" rel="author" title="Giulio De Donato">Giulio De Donato</a>)
                         tons of lines of code ago I took a degree in Computer Science, I'm the
                        lead developer for Terravision and I love open source. I can't stop studying, you could find me in some conferences, exactly now I'm in the center of Rome.</p>
                </div>
                <!-- start sticky section
#################################################
                -->
                <div class="well">
                    <div class="center" align="center">
                        <a href="https://github.com/liuggio" title="Giulio De Donato github projects"
                           target="_blank"><img src="/assets/themes/readable-liuggio/img/github_blue_black_cat_32.png"
                                                alt="liuggio's gravatar"></a>
                        <a href="http://twitter.com/liuggio" title="Giulio De Donato twitter page"
                           target="_blank"><img
                                src="/assets/themes/readable-liuggio/img/1345542601_Twitter_32x32.png"
                                alt="liuggio twitter page"></a>
                        <a href="http://www.linkedin.com/profile/view?id=94597934&"
                           title="Giulio De Donato Linkedin profile" target="_blank"><img
                                src="/assets/themes/readable-liuggio/img/1345542710_social_linkedin_box_blue.png"
                                width=34
                                alt="Giulio De Donato Linkedin profile"></a>
                        <a href="http://www.slideshare.net/liuggio"
                           title="Giulio De Donato slideshare presentations" target="_blank"><img
                                src="/assets/themes/readable-liuggio/img/slideshare.png" width=34
                                alt="Giulio De Donato slideshare presentations" width=30></a>
                    </div>
                    <div class="center">
                        <div align="center" class="twitter-cnt">
                            <a href="https://twitter.com/liuggio" class="twitter-follow-button"
                               data-show-count="false" data-size="large" data-dnt="true" title="Follow Giulio De Donato">Follow
                                @liuggio</a>
                            <script>!function (d, s, id) {
                                var js, fjs = d.getElementsByTagName(s)[0];
                                if (!d.getElementById(id)) {
                                    js = d.createElement(s);
                                    js.id = id;
                                    js.src = "//platform.twitter.com/widgets.js";
                                    fjs.parentNode.insertBefore(js, fjs);
                                }
                            }(document, "script", "twitter-wjs");</script>
                        </div>
                        <div align="center">
                            <a href="#">back to top</a>
                        </div>
                    </div>
                </div>

                <!-- end sticky section
                ================================================== -->
                <div class="">
                    <h2>Categories</h2>
                    <ul>
                        
                        


  
     
    	<li><a href="/categories.html#tips-ref">
    		tips <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#hack-ref">
    		hack <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#manifesto-ref">
    		manifesto <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#bdd-ref">
    		bdd <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#tutorial-ref">
    		tutorial <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#phpunit-ref">
    		phpunit <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#cache-ref">
    		cache <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#conference-ref">
    		conference <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#statsd-ref">
    		statsd <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#award-ref">
    		award <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#fluffy-ref">
    		fluffy <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#cloud-ref">
    		cloud <span>1</span>
    	</a></li>
    
  


                    </ul>

                </div>
                <div class="">
                    <h2>Tags</h2>
                    <ul class="tag_box">
                        
                        


  
     
    	<li><a href="/tags.html#test-ref">test <span>2</span></a></li>
     
    	<li><a href="/tags.html#symfony2-ref">symfony2 <span>6</span></a></li>
     
    	<li><a href="/tags.html#assetic-ref">assetic <span>2</span></a></li>
     
    	<li><a href="/tags.html#optimization-ref">optimization <span>1</span></a></li>
     
    	<li><a href="/tags.html#php-internal-ref">php-internal <span>1</span></a></li>
     
    	<li><a href="/tags.html#bdd-ref">bdd <span>2</span></a></li>
     
    	<li><a href="/tags.html#assets-ref">assets <span>3</span></a></li>
     
    	<li><a href="/tags.html#rest-ref">rest <span>1</span></a></li>
     
    	<li><a href="/tags.html#code-inspection-ref">code-inspection <span>1</span></a></li>
     
    	<li><a href="/tags.html#HTTP-ref">HTTP <span>1</span></a></li>
     
    	<li><a href="/tags.html#automate-ref">automate <span>1</span></a></li>
     
    	<li><a href="/tags.html#phpunit-ref">phpunit <span>3</span></a></li>
     
    	<li><a href="/tags.html#team-ref">team <span>1</span></a></li>
     
    	<li><a href="/tags.html#tutorial-ref">tutorial <span>1</span></a></li>
     
    	<li><a href="/tags.html#cdn-ref">cdn <span>1</span></a></li>
     
    	<li><a href="/tags.html#rackspace-ref">rackspace <span>1</span></a></li>
     
    	<li><a href="/tags.html#api-ref">api <span>1</span></a></li>
     
    	<li><a href="/tags.html#tvision-ref">tvision <span>1</span></a></li>
     
    	<li><a href="/tags.html#vagrant-ref">vagrant <span>1</span></a></li>
     
    	<li><a href="/tags.html#APC-ref">APC <span>1</span></a></li>
     
    	<li><a href="/tags.html#servergrove-ref">servergrove <span>1</span></a></li>
     
    	<li><a href="/tags.html#cache-ref">cache <span>2</span></a></li>
     
    	<li><a href="/tags.html#coding-ref">coding <span>1</span></a></li>
     
    	<li><a href="/tags.html#redis-ref">redis <span>1</span></a></li>
     
    	<li><a href="/tags.html#guard-ref">guard <span>1</span></a></li>
     
    	<li><a href="/tags.html#conference-ref">conference <span>1</span></a></li>
     
    	<li><a href="/tags.html#statsd-ref">statsd <span>2</span></a></li>
     
    	<li><a href="/tags.html#github-ref">github <span>1</span></a></li>
     
    	<li><a href="/tags.html#bundle-ref">bundle <span>3</span></a></li>
     
    	<li><a href="/tags.html#doctrine2-ref">doctrine2 <span>1</span></a></li>
     
    	<li><a href="/tags.html#phpspec-ref">phpspec <span>2</span></a></li>
     
    	<li><a href="/tags.html#tdd-ref">tdd <span>2</span></a></li>
     
    	<li><a href="/tags.html#interface-ref">interface <span>1</span></a></li>
     
    	<li><a href="/tags.html#speaker-ref">speaker <span>1</span></a></li>
     
    	<li><a href="/tags.html#graphite-ref">graphite <span>1</span></a></li>
     
    	<li><a href="/tags.html#php-ref">php <span>11</span></a></li>
     
    	<li><a href="/tags.html#bitbucket-ref">bitbucket <span>1</span></a></li>
    
  



                    </ul>
                </div>
            </aside>

            <!-- start content section
            ================================================== -->
            <div class="span9">
                
<div class="span9">
    <div class="page-header">
        <div class="row">
            <h1 class="span8">PHPUnit vs PHPSpec: theory on Behaviour Driven Development 1/3 
            </h1>
          <div class="span1 right bottom sticky">
               <a href="https://twitter.com/share" class="twitter-share-button" data-via="liuggio" data-size="large"
                  data-count="none" data-dnt="true">Tweet</a>
               <script>!function (d, s, id) {
                   var js, fjs = d.getElementsByTagName(s)[0];
                   if (!d.getElementById(id)) {
                       js = d.createElement(s);
                       js.id = id;
                       js.src = "//platform.twitter.com/widgets.js";
                       fjs.parentNode.insertBefore(js, fjs);
                   }
               }(document, "script", "twitter-wjs");</script>
              <!-- todo:<div class="inner">back to the top</div>-->
           </div>
        </div>
        <hr>
        <div class="row">
            <div class="span4">
                <div class="date"><span>05 January 2013</span></div>
            </div>

            <div class="span5">
                
                <ul class="tag_box">
                    
                    


  
     
    	<li><a href="/tags.html#phpunit-ref">phpunit <span>3</span></a></li>
     
    	<li><a href="/tags.html#tdd-ref">tdd <span>2</span></a></li>
     
    	<li><a href="/tags.html#bdd-ref">bdd <span>2</span></a></li>
     
    	<li><a href="/tags.html#php-ref">php <span>11</span></a></li>
     
    	<li><a href="/tags.html#test-ref">test <span>2</span></a></li>
     
    	<li><a href="/tags.html#phpspec-ref">phpspec <span>2</span></a></li>
    
  



                </ul>
                
            </div>
        </div>

    </div>

    <article>


        <p>The first part of a series of short articles (maybe three) where I&#8217;d like to share my tiny experience with BDD and in particular with PHPSpec.</p>

<h2 id='phpunit_vs_phpspec_a_word_on_behaviour_testing'>PHPUnit vs <a href='https://github.com/phpspec/phpspec2'>PHPSpec</a>: A word on behaviour testing</h2>

<p>I recently discovered that there is an alternative to PHPUnit, and I really like this new approach.</p>

<p><strong>Q:</strong> But why an alternative if PHPUnit does everything I need?</p>

<p><strong>A:</strong> What could be changed is the way of doing test,</p>

<p>If you&#8217;ve ever worked in TDD, you know it&#8217;s very time consuming</p>

<ol>
<li>
<p>create - create or modify the test</p>
</li>

<li>
<p>fail - see it fail</p>
</li>

<li>
<p>pass - code the minimum to get the test passed</p>
</li>

<li>
<p>refactor - Refactoring</p>
</li>

<li>
<p>go to step 1</p>
</li>
</ol>

<h2 id='the_differences_in_a_sentence'>The differences in a sentence</h2>

<p>If the story is a key of the development, the behaviour is the differrence between TDD and BDD.</p>

<p>If you need to test the insertion of an object into a collection and the collection is represented by an Array, with xUnit you should assert that the collection contains the object in the Array, but if the collection will change to another type of container, graph for example, the xUnit will fail, even if the behaviour is unchanged. In BDD you are not testing you are describing what that classes will do, and so you can continue creating the class (PHPSpec will create the class and the methods for you)</p>

<h2 id='bdd'>BDD</h2>

<p>There are several BDD frameworks on PHP depending on what you want to test.</p>

<h4 id='external_behaviour'>External behaviour</h4>

<p><a href='http://behat.org/'>Behat</a> deals to have specifications that reflects the environment from the outside.</p>

<h4 id='internal_behaviour'>Internal behaviour</h4>

<p><a href='https://github.com/phpspec/phpspec2'>PHPSpec</a> responds to the behaviour in the lower level, from the internal of the classes.</p>

<p><a href='https://github.com/phpspec/phpspec2'>PHPSpec</a> is considered a tool that helps you to develop.</p>

<h2 id='summary'>Summary</h2>

<p>The BDD tests what the object does instead of what it is, and what it does is much more important.</p>

<p>We have to say that Ruby community helped a lot the evolution of BDD, RSpec is a standard-de-facto, in Ruby world.</p>

<h2 id='faq'>FAQ</h2>

<p><strong>Q:</strong> When I should use PHPUnit and when to use <a href='https://github.com/phpspec/phpspec2'>PHPSpec</a>?</p>

<p><strong>A:</strong> There isn&#8217;t a better way between the two, depending on how you want to approach the problem, if you want to follow the behaviour or a unit test the code.</p>

<p><strong>Q:</strong> With PHPUnit I could do the same things as I could do with <a href='https://github.com/phpspec/phpspec2'>PHPSpec</a>?</p>

<p><strong>A:</strong> Absolutely, in fact there is a mapping between the two</p>

<p>• Assertion Becomes expectation.</p>

<p>• Test method Becomes code example</p>

<p>• Test case example Becomes group</p>

<p><strong>BUT</strong> You would be distracted by the code loosing focus on the result, and you might miss the concept of behaviour. [EDITED 07-01-2013 thanks to <a href='http://twitter.com/euxpom'>euxpom <img src='http://gravatar.com/avatar/77014411a56fa9c746d6a89b7fd96121?size=20' alt='exupom' /></a>]</p>

<h2 id='phpspec_advantages'><a href='https://github.com/phpspec/phpspec2'>PHPSpec</a> advantages</h2>

<p>xSpec is context specific, expectation, the output is the documentation and it is for this reason that the language is used because the same syntax you guide you to focus in behaviour, and the importance of documentation.</p>

<pre><code>bin/phpspec run -f prettify -v</code></pre>

<p>So the big change is on how you write test code.</p>

<p><strong>In the next post I will show some examples on how you could use <a href='https://github.com/phpspec/phpspec2'>PHPSpec</a> to test some (in)famous design pattern.</strong></p>

<h2 id='bibliography'>Bibliography</h2>

<ol>
<li>
<p><a href='http://pragprog.com/book/achbd/the-rspec-book'>The RSpec Book Behaviour-Driven Development with RSpec, Cucumber, and Friends</a> by David Chelimsky, Dave Astels, Zach Dennis, Aslak Hellesøy, Bryan Helmkamp, Dan North</p>
</li>

<li>
<p>Test Driven Development. By Example di Kent Beck (dic. 2002)</p>
</li>
</ol>

    </article>
    <hr>
    <div class="pagination">
        <ul class="pager">
            
            <li class="prev"><a href="/automate-test-and-code-inspection-in-php-with-guard-and-symfony2" title="Automate Test and Code Inspection in PHP with Guard, and Symfony2">&larr;
                Previous - Automate Test and Code Inspection in PHP with Guard, and Symfony2</a></li>
            
            <li><a href="/index.html">Archive</a></li>
            
            <li class="next"><a href="/the-meaning-of-cache-for-a-web-developer-no-more-too-many-connection" title="The meaning of Cache for a web developer no more too many connection">Next - The meaning of Cache for a web developer no more too many connection &rarr;</a>
            </li>
            
        </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'welcometothebundle'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</div>
  
 


            </div>
        </div>
    </section>


    <hr>
    <footer>
        <p>&copy; liuggio 2012
            <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll
                Bootstrap</a>,
            <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>,
            <a href="http://github.com" target="_blank">GitHub</a>,
            <a href="http://bootswatch.com/" target="_blank">Bootswatch</a>
        </p>

        <div id="footer"></div>
    </footer>
</div>
</div>
<!-- /container -->
<script src="/assets/themes/readable-liuggio/bootstrap/js/jquery-1.8.3.min.js" type="text/javascript"></script>

<script type="text/javascript">
    var links = document.links;
    for (var i = 0, linksLength = links.length; i < linksLength; i++) {
        if (links[i].hostname != window.location.hostname) {
            links[i].target = '_blank';
        }
    }
    var links = document.links;
    for (var i = 0, linksLength = links.length; i < linksLength; i++) {

        if (links[i].href == 'http://www.slideshare.net/liuggio/rationally-boost-your-symfony2-application-with-caching-tips-and-monitoring') {

            //dirty solution in order to add slideshare frame into github Jekyll
            links[i].innerHTML = '<iframe src="http://www.slideshare.net/slideshow/embed_code/14625769?rel=0" width="512" height="421" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen webkitallowfullscreen mozallowfullscreen> </iframe><div style="margin-bottom:5px"> <strong> <a href="http://www.slideshare.net/liuggio/rationally-boost-your-symfony2-application-with-caching-tips-and-monitoring/?no" title="Rationally boost your symfony2 application with caching tips and monitoring" target="_blank">Rationally boost your symfony2 application with caching tips and monitoring</a></div>';
            break;
        } else if (links[i].href == 'http://www.slideshare.net/liuggio/its-all-about-behaviour-also-in-php') {
            links[i].innerHTML = '<iframe src="http://www.slideshare.net/slideshow/embed_code/27465974?rel=0" width="512" height="421" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen webkitallowfullscreen mozallowfullscreen> </iframe><div style="margin-bottom:5px"> <strong> <a href="http://www.slideshare.net/liuggio/its-all-about-behaviour-also-in-php/?no" title="It is all about behaviour also in php. PHP loves BDD." target="_blank">It is all about behaviour also in php. PHP loves BDD.</a></div>';
        }
    }

</script>
<script type="text/javascript">
  var analytics=analytics||[];analytics.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);var r=function(e){return function(){analytics.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["identify","track","trackLink","trackForm","trackClick","trackSubmit","pageview","ab","alias","ready"];for(var s=0;s<i.length;s++)analytics[i[s]]=r(i[s])};
  analytics.load("wdoo4hzofo");
</script>

<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37195869-1']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();

</script>


<script>
    $(function () { // document ready
        if (!!$('.sticky').offset()) { // make sure ".sticky" element exists
            var stickyTop = $('.sticky').offset().top; // returns number
            $(window).scroll(function () { // scroll event
                var windowTop = $(window).scrollTop(); // returns number
                if (stickyTop < windowTop) {
                    $('.sticky').css({ position:'fixed', top:0, right:0 });
                    $('.sticky').addClass("well");
                    $('.sticky .inner').show();

                }
                else {
                    $('.sticky').css('position', 'static');
                    $('.sticky').removeClass("well").addClass("span1");
                    $('.sticky .inner').hide();
                }
            });
        }
    });
</script>

</body>
</html>

